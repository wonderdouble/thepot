{"version":3,"sources":["../../src/db/index.js"],"names":["require","config","makeDb","MongoClient","mongodb","url","process","env","DATABASE_URL","dbName","client","useUnifiedTopology","connect","e","console","error","db","makeId","makeIdFromString","id","ObjectID"],"mappings":";;;;;;;AACA;;;;AADAA,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB;;AAGe,eAAeC,MAAf,GAAyB;AACtC,QAAMC,WAAW,GAAGC,iBAAQD,WAA5B;AACA,QAAME,GAAG,GAAGC,OAAO,CAACC,GAAR,CAAYC,YAAxB;AACA,QAAMC,MAAM,GAAG,WAAf;AACA,QAAMC,MAAM,GAAG,IAAIP,WAAJ,CAAgBE,GAAhB,EAAqB;AAAEM,IAAAA,kBAAkB,EAAE;AAAtB,GAArB,CAAf,CAJsC,CAKtC;;AAEA,MAAI;AACF,UAAMD,MAAM,CAACE,OAAP,EAAN,CADE,CAEF;AACD,GAHD,CAGE,OAAOC,CAAP,EAAU;AACRC,IAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd;AACH;;AAED,QAAMG,EAAE,GAAG,MAAMN,MAAM,CAACM,EAAP,CAAUP,MAAV,CAAjB;AACAO,EAAAA,EAAE,CAACC,MAAH,GAAYC,gBAAZ;AACA,SAAOF,EAAP;AACD;;AAED,SAASE,gBAAT,CAA2BC,EAA3B,EAA+B;AAC7B,SAAO,IAAIf,iBAAQgB,QAAZ,CAAqBD,EAArB,CAAP;AACD","sourcesContent":["require('dotenv').config();\nimport mongodb from 'mongodb';\n\nexport default async function makeDb () {\n  const MongoClient = mongodb.MongoClient\n  const url = process.env.DATABASE_URL;\n  const dbName = 'pragmatic'\n  const client = new MongoClient(url, { useUnifiedTopology: true })\n  //await client.connect()\n\n  try {\n    await client.connect();\n    //await listDatabases(client);\n  } catch (e) {\n      console.error(e);\n  }\n  \n  const db = await client.db(dbName)\n  db.makeId = makeIdFromString\n  return db\n}\n\nfunction makeIdFromString (id) {\n  return new mongodb.ObjectID(id)\n}"],"file":"index.js"}